<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>众里寻他千百度</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-03-15T13:37:13.104Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Raven</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>docker的初体验</title>
    <link href="http://yoursite.com/2019/03/15/docker%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>http://yoursite.com/2019/03/15/docker初体验/</id>
    <published>2019-03-15T13:32:04.986Z</published>
    <updated>2019-03-15T13:37:13.104Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Mar 15 2019 22:48:46 GMT+0800 (GMT+08:00) --><div id="content_views" class="markdown_views prism-atom-one-light"><br><br><svg xmlns="http://www.w3.org/2000/svg" style="display:none"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color:transparent"/></svg><br><hr><br><pre class="prettyprint"><code class="has-numbering">早都听说过docker,但是一直却不知道它是什么?今天有时间就研究了一下怎么安装并使用<br>docker,特此记录一下。<br></code><ul class="pre-numbering"><li style="color:#999">1</li><li style="color:#999">2</li></ul></pre><br><hr><br><ul><br><li>首先呢，我们需要安装自己的一款虚拟机，具体教程可以百度。</li><br><li>第二步，就是下载一款linux系统，这里我推荐使用centos。<a href="https://www.centos.org/download/" rel="nofollow" target="_blank">下载链接</a></li><br><li>第三步，就是安装centos了，这些都不是最重要的，而且整个过程也很简单，就不一一记录了。</li><br><li>1.安装好了centos之后，使用命令先安装 vim编译器：<pre class="prettyprint"><code class="has-numbering">yum -y install vim<em><br></em></code><ul class="pre-numbering"><li style="color:#999">1</li></ul></pre><br>2.因为<strong>docker</strong> 要求 CentOS 系统的内核版本高于 3.10,所以先通过<pre class="prettyprint"><code class="has-numbering">uname -r<br></code><ul class="pre-numbering"><li style="color:#999">1</li></ul></pre><br>查看内核版本是否满足，如果小于3.10，那么使用以下命令更新内核。<pre class="prettyprint"><code class="has-numbering">sudo yum update<br></code><ul class="pre-numbering"><li style="color:#999">1</li></ul></pre><br></li><br></ul><br><ol start="3"><br><li><br><p>运行以下命令</p><br><pre class="prettyprint"><code class="has-numbering">#安装一些必要的系统工具：<br>sudo yum install -y yum-utils device-mapper-persistent-data lvm2<br><br>添加软件源信息：<br>sudo yum-config-manager –add-repo <a href="http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</a><br><br>更新 yum 缓存：<br>sudo yum makecache fast<br><br>安装 Docker-ce：<br>sudo yum -y install docker-ce<br><br>运行docker<br>sudo systemctl start docker<br></code><ul class="pre-numbering"><li style="color:#999">1</li><li style="color:#999">2</li><li style="color:#999">3</li><li style="color:#999">4</li><li style="color:#999">5</li><li style="color:#999">6</li><li style="color:#999">7</li><li style="color:#999">8</li><li style="color:#999">9</li><li style="color:#999">10</li><li style="color:#999">11</li><li style="color:#999">12</li><li style="color:#999">13</li><li style="color:#999">14</li></ul></pre><br><p>想运行一个docker 的helloworld容器，但是却找不到。</p><br><pre class="prettyprint"><code class="has-numbering">sudo docker run hello-world<br></code><ul class="pre-numbering"><li style="color:#999">1</li></ul></pre><br><p>这时候 进入 /etc/docker 目录，新建一个daemon.json文件（如果该文件存在，那么在后面追加内容即可）</p><br><pre class="prettyprint"><code class="has-numbering"># 新建文件<br>touch daemon.json<br># 编辑文件<br>vim /etc/docker<br><br>#增加以下内容：<br> { “storage-driver”:  “devicemapper”}<br><br></code><ul class="pre-numbering"><li style="color:#999">1</li><li style="color:#999">2</li><li style="color:#999">3</li><li style="color:#999">4</li><li style="color:#999">5</li><li style="color:#999">6</li><li style="color:#999">7</li><li style="color:#999">8</li></ul></pre><br><p>保存退出vim编辑器，然后就可以运行 helloworld 啦~</p><br></li><br></ol><br><ul><br><li><br><p>最后想给docker容器安装一下 mysql，却发现查找不到。。<br><br>解决方案：</p><br><pre class="prettyprint"><code class="has-numbering"># 安装dig命令<br>yum install bind-utils<br><br>dig @114.114.114.114 registry-1.docker.io<br></code><ul class="pre-numbering"><li style="color:#999">1</li><li style="color:#999">2</li><li style="color:#999">3</li><li style="color:#999">4</li></ul></pre><br><p>运行完可见下图：<img src="https://img-blog.csdnimg.cn/20190315185817551.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h1aWppYWFhMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><br>再上面随便选择一个ip,最后呢，再修改hosts文件，</p><br><pre class="prettyprint"><code class="has-numbering">    cd /etc<br>    vim hosts<br></code><ul class="pre-numbering"><li style="color:#999">1</li><li style="color:#999">2</li></ul></pre><br><p>添加以下dns映射即可，之后退出vim。<img src="https://img-blog.csdnimg.cn/20190315190318947.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h1aWppYWFhMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><br><pre class="prettyprint"><code class="has-numbering">#重启 docker容器。<br>sudo service docker restart<br><br>#查找musql<br>docker search mysql<br><br>#安装msql<br>docker pull mysql<br><br>#进入容器<br>docker exec -it mysql bash<br>#登录mysql<br>mysql -u root -p<br>ALTER USER ‘root‘@’localhost’ IDENTIFIED BY ‘你要设置的密码’;<br>#添加远程登录用户<br>CREATE USER ‘你的昵称‘@’%’ IDENTIFIED WITH mysql_native_password BY ‘你的密码’;<br>GRANT ALL PRIVILEGES ON .* TO ‘你的昵称‘@’%’;<br></code><ul class="pre-numbering"><li style="color:#999">1</li><li style="color:#999">2</li><li style="color:#999">3</li><li style="color:#999">4</li><li style="color:#999">5</li><li style="color:#999">6</li><li style="color:#999">7</li><li style="color:#999">8</li><li style="color:#999">9</li><li style="color:#999">10</li><li style="color:#999">11</li><li style="color:#999">12</li><li style="color:#999">13</li><li style="color:#999">14</li><li style="color:#999">15</li><li style="color:#999">16</li><li style="color:#999">17</li></ul></pre><br><p>接着我们root用户使用Navicat连接容器的mysql,却报错<strong>Client does not support authentication protocol requested by server; consider upgrading MySQL</strong>，<br><br>于是：</p><br><pre class="prettyprint"><code class="has-numbering">ALTER USER ‘root‘@’%’ IDENTIFIED WITH mysql_native_password BY ‘你的密码’;<br>ALTER USER ‘root‘@’localhost’ IDENTIFIED WITH mysql_native_password BY ‘你的密码’;<br>SELECT plugin FROM mysql.user WHERE User = ‘root’;<br><br></code><ul class="pre-numbering"><li style="color:#999">1</li><li style="color:#999">2</li><li style="color:#999">3</li><li style="color:#999">4</li></ul></pre><br><p>即可连接成功，最后想退出docker容器，注意不是关闭docker服务 ，<br><br>因为我们刚才进入mysql容器，所以不用的时候可以退出docker命令。<br><br>使用命令 exit 即可</p><br></li><br></ul><br><br></div><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Fri Mar 15 2019 22:48:46 GMT+0800 (GMT+08:00) --&gt;&lt;div id=&quot;content_views&quot; class=&quot;markdown_views prism-atom-one-light&quot;&gt;&lt;br&gt;&lt;br
      
    
    </summary>
    
      <category term="docker" scheme="http://yoursite.com/categories/docker/"/>
    
    
      <category term="docker" scheme="http://yoursite.com/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2019/03/15/hello-world/"/>
    <id>http://yoursite.com/2019/03/15/hello-world/</id>
    <published>2019-03-15T12:19:57.599Z</published>
    <updated>2019-03-15T12:19:57.599Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Mar 15 2019 22:48:46 GMT+0800 (GMT+08:00) --><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Fri Mar 15 2019 22:48:46 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hex
      
    
    </summary>
    
    
  </entry>
  
</feed>
